{"version":3,"sources":["../src/Autocomplete.js"],"names":[],"mappings":"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","file":"Autocomplete.js","sourcesContent":["const React = require('react')\nconst { findDOMNode } = require('react-dom')\nconst scrollIntoView = require('dom-scroll-into-view')\n\nlet _debugStates = []\n\nlet Autocomplete = React.createClass({\n\n  propTypes: {\n    value: React.PropTypes.any,\n    onChange: React.PropTypes.func,\n    onSelect: React.PropTypes.func,\n    onFocus: React.PropTypes.func,\n    onBlur: React.PropTypes.func,\n    shouldItemRender: React.PropTypes.func,\n    sortItems: React.PropTypes.func,\n    getItemValue: React.PropTypes.func.isRequired,\n    renderItem: React.PropTypes.func.isRequired,\n    renderMenu: React.PropTypes.func,\n    menuStyle: React.PropTypes.object,\n    inputProps: React.PropTypes.object,\n    wrapperProps: React.PropTypes.object,\n    wrapperStyle: React.PropTypes.object,\n    debug: React.PropTypes.bool,\n  },\n\n  getDefaultProps () {\n    return {\n      value: '',\n      wrapperProps: {},\n      wrapperStyle: {\n        display: 'inline-block'\n      },\n      inputProps: {},\n      onChange () {},\n      onSelect (value, item) {},\n      onFocus () {},\n      onBlur () {},\n      renderMenu (items, value, style) {\n        return <div style={{...style, ...this.menuStyle}} children={items}/>\n      },\n      shouldItemRender () { return true },\n      menuStyle: {\n        borderRadius: '3px',\n        boxShadow: '0 2px 12px rgba(0, 0, 0, 0.1)',\n        background: 'rgba(255, 255, 255, 0.9)',\n        padding: '2px 0',\n        fontSize: '90%',\n        position: 'fixed',\n        overflow: 'auto',\n        maxHeight: '50%', // TODO: don't cheat, let it flow to the bottom\n      }\n    }\n  },\n\n  getInitialState () {\n    return {\n      isOpen: false,\n      highlightedIndex: null,\n    }\n  },\n\n  componentWillMount () {\n    this._ignoreBlur = false\n    this._performAutoCompleteOnUpdate = false\n    this._performAutoCompleteOnKeyUp = false\n  },\n\n  componentWillReceiveProps (nextProps) {\n    this._performAutoCompleteOnUpdate = true\n    // If `items` has changed we want to reset `highlightedIndex`\n    // since it probably no longer refers to a relevant item\n    if (this.props.items !== nextProps.items ||\n      // The entries in `items` may have been changed even though the\n      // object reference remains the same, double check by seeing\n      // if `highlightedIndex` points to an existing item\n      this.state.highlightedIndex >= nextProps.items.length) {\n      this.setState({ highlightedIndex: null })\n    }\n  },\n\n  componentDidUpdate (prevProps, prevState) {\n    if (this.state.isOpen === true && prevState.isOpen === false)\n      this.setMenuPositions()\n\n    if (this.state.isOpen && this._performAutoCompleteOnUpdate) {\n      this._performAutoCompleteOnUpdate = false\n      this.maybeAutoCompleteText()\n    }\n\n    this.maybeScrollItemIntoView()\n  },\n\n  maybeScrollItemIntoView () {\n    if (this.state.isOpen === true && this.state.highlightedIndex !== null) {\n      var itemNode = this.refs[`item-${this.state.highlightedIndex}`]\n      var menuNode = this.refs.menu\n      scrollIntoView(\n        findDOMNode(itemNode),\n        findDOMNode(menuNode),\n        { onlyScrollIfNeeded: true }\n      )\n    }\n  },\n\n  handleKeyDown (event) {\n    if (this.keyDownHandlers[event.key])\n      this.keyDownHandlers[event.key].call(this, event)\n    else {\n      this.setState({\n        highlightedIndex: null,\n        isOpen: true\n      })\n    }\n  },\n\n  handleChange (event) {\n    this._performAutoCompleteOnKeyUp = true\n    this.props.onChange(event, event.target.value)\n  },\n\n  handleKeyUp () {\n    if (this._performAutoCompleteOnKeyUp) {\n      this._performAutoCompleteOnKeyUp = false\n      this.maybeAutoCompleteText()\n    }\n  },\n\n  keyDownHandlers: {\n    ArrowDown (event) {\n      event.preventDefault()\n      const itemsLength = this.getFilteredItems().length\n      if (!itemsLength) return\n      var { highlightedIndex } = this.state\n      var index = (\n        highlightedIndex === null ||\n        highlightedIndex === itemsLength - 1\n      ) ?  0 : highlightedIndex + 1\n      this._performAutoCompleteOnKeyUp = true\n      this.setState({\n        highlightedIndex: index,\n        isOpen: true,\n      })\n    },\n\n    ArrowUp (event) {\n      event.preventDefault()\n      const itemsLength = this.getFilteredItems().length\n      if (!itemsLength) return\n      var { highlightedIndex } = this.state\n      var index = (\n        highlightedIndex === 0 ||\n        highlightedIndex === null\n      ) ? itemsLength - 1 : highlightedIndex - 1\n      this._performAutoCompleteOnKeyUp = true\n      this.setState({\n        highlightedIndex: index,\n        isOpen: true,\n      })\n    },\n\n    Enter (event) {\n      if (this.state.isOpen === false) {\n        // menu is closed so there is no selection to accept -> do nothing\n        return\n      }\n      else if (this.state.highlightedIndex == null) {\n        // input has focus but no menu item is selected + enter is hit -> close the menu, highlight whatever's in input\n        this.setState({\n          isOpen: false\n        }, () => {\n          this.refs.input.select()\n        })\n      }\n      else {\n        // text entered + menu item has been highlighted + enter is hit -> update value to that of selected menu item, close the menu\n        event.preventDefault()\n        var item = this.getFilteredItems()[this.state.highlightedIndex]\n        var value = this.props.getItemValue(item)\n        this.setState({\n          isOpen: false,\n          highlightedIndex: null\n        }, () => {\n          //this.refs.input.focus() // TODO: file issue\n          this.refs.input.setSelectionRange(\n            value.length,\n            value.length\n          )\n          this.props.onSelect(value, item)\n        })\n      }\n    },\n\n    Escape (event) {\n      this.setState({\n        highlightedIndex: null,\n        isOpen: false\n      })\n    }\n  },\n\n  getFilteredItems () {\n    let items = this.props.items\n\n    if (this.props.shouldItemRender) {\n      items = items.filter((item) => (\n        this.props.shouldItemRender(item, this.props.value)\n      ))\n    }\n\n    if (this.props.sortItems) {\n      items.sort((a, b) => (\n        this.props.sortItems(a, b, this.props.value)\n      ))\n    }\n\n    return items\n  },\n\n  maybeAutoCompleteText () {\n    if (this.props.value === '')\n      return\n    var { highlightedIndex } = this.state\n    var items = this.getFilteredItems()\n    if (items.length === 0)\n      return\n    var matchedItem = highlightedIndex !== null ?\n      items[highlightedIndex] : items[0]\n    var itemValue = this.props.getItemValue(matchedItem)\n    var itemValueDoesMatch = (itemValue.toLowerCase().indexOf(\n      this.props.value.toLowerCase()\n    ) === 0)\n    if (itemValueDoesMatch && highlightedIndex === null)\n      this.setState({ highlightedIndex: 0 })\n  },\n\n  setMenuPositions () {\n    var node = this.refs.input\n    var rect = node.getBoundingClientRect()\n    var computedStyle = global.window.getComputedStyle(node)\n    var marginBottom = parseInt(computedStyle.marginBottom, 10) || 0;\n    var marginLeft = parseInt(computedStyle.marginLeft, 10) || 0;\n    var marginRight = parseInt(computedStyle.marginRight, 10) || 0;\n    this.setState({\n      menuTop: rect.bottom + marginBottom,\n      menuLeft: rect.left + marginLeft,\n      menuWidth: rect.width + marginLeft + marginRight\n    })\n  },\n\n  highlightItemFromMouse (index) {\n    this.setState({ highlightedIndex: index })\n  },\n\n  selectItemFromMouse (item) {\n    var value = this.props.getItemValue(item);\n    this.setState({\n      isOpen: false,\n      highlightedIndex: null\n    }, () => {\n      this.props.onSelect(value, item)\n      this.refs.input.focus()\n    })\n  },\n\n  setIgnoreBlur (ignore) {\n    this._ignoreBlur = ignore\n  },\n\n  renderMenu () {\n    var items = this.getFilteredItems().map((item, index) => {\n      var element = this.props.renderItem(\n        item,\n        this.state.highlightedIndex === index,\n        {cursor: 'default'}\n      )\n      return React.cloneElement(element, {\n        onMouseDown: () => this.setIgnoreBlur(true), // Ignore blur to prevent menu from de-rendering before we can process click\n        onMouseEnter: () => this.highlightItemFromMouse(index),\n        onClick: () => this.selectItemFromMouse(item),\n        ref: `item-${index}`,\n      })\n    })\n    var style = {\n      left: this.state.menuLeft,\n      top: this.state.menuTop,\n      minWidth: this.state.menuWidth,\n    }\n    var menu = this.props.renderMenu(items, this.props.value, style)\n    return React.cloneElement(menu, { ref: 'menu' })\n  },\n\n  handleInputBlur (event) {\n    if (this._ignoreBlur)\n      return\n    this.setState({\n      isOpen: false,\n      highlightedIndex: null\n    })\n    this.props.onBlur(event, event.target.value)\n  },\n\n  handleInputFocus (event) {\n    if (this._ignoreBlur) {\n      this.setIgnoreBlur(false)\n      return\n    }\n    // We don't want `selectItemFromMouse` to trigger when\n    // the user clicks into the input to focus it, so set this\n    // flag to cancel out the logic in `handleInputClick`.\n    // The event order is:  MouseDown -> Focus -> MouseUp -> Click\n    this._ignoreClick = true\n    this.setState({ isOpen: true })\n    this.props.onFocus(event, event.target.value)\n  },\n\n  isInputFocused () {\n    var el = this.refs.input\n    return el.ownerDocument && (el === el.ownerDocument.activeElement)\n  },\n\n  handleInputClick () {\n    // Input will not be focused if it's disabled\n    if (this.isInputFocused() && this.state.isOpen === false)\n      this.setState({ isOpen: true })\n    else if (this.state.highlightedIndex !== null && !this._ignoreClick)\n      this.selectItemFromMouse(this.getFilteredItems()[this.state.highlightedIndex])\n    this._ignoreClick = false\n  },\n\n  render () {\n    if (this.props.debug) { // you don't like it, you love it\n      _debugStates.push({\n        id: _debugStates.length,\n        state: this.state\n      })\n    }\n\n    return (\n      <div style={{...this.props.wrapperStyle}} {...this.props.wrapperProps}>\n        <input\n          {...this.props.inputProps}\n          role=\"combobox\"\n          aria-autocomplete=\"list\"\n          autoComplete=\"off\"\n          ref=\"input\"\n          onFocus={(event) => this.handleInputFocus(event)}\n          onBlur={(event) => this.handleInputBlur(event)}\n          onChange={(event) => this.handleChange(event)}\n          onKeyDown={(event) => this.handleKeyDown(event)}\n          onKeyUp={(event) => this.handleKeyUp(event)}\n          onClick={this.handleInputClick}\n          value={this.props.value}\n        />\n        {this.state.isOpen && this.renderMenu()}\n        {this.props.debug && (\n          <pre style={{marginLeft: 300}}>\n            {JSON.stringify(_debugStates.slice(_debugStates.length - 5, _debugStates.length), null, 2)}\n          </pre>\n        )}\n      </div>\n    )\n  }\n})\n\nmodule.exports = Autocomplete\n"]}